<!DOCTYPE html>
<html>
	<head>
		<title>E</title>
	</head>
	<style>
html, body {
height: 100%;
}

		.editor {
			white-space: pre;
width: 100%;
height: 100%;
		}
	</style>
	<body>
		<textarea class="editor">
		</textarea>
		<script>
			let fs = require('fs')
			let file = fs.readFileSync('./index.html', 'utf8')

			let editor = document.querySelector('.editor')
			editor.value = file

			// cannot be seen
//			console.log('file', file)

			// does not work
//			win.showDevTools()

editor.addEventListener('keydown', function(e) {
	if (e.keyCode === 9) {
		e.preventDefault()
		let pos = this.selectionStart
		let before = this.value.substring(0, this.selectionStart)
		let after = this.value.substring(this.selectionStart)
		this.value = before + '\t' + after
		this.selectionStart = pos + 1
		this.selectionEnd = pos + 1
	}

})

			window.addEventListener('keydown', function(e) {

				if ((window.navigator.platform.match('Mac') ? e.metaKey : e.ctrlKey)
					&& e.keyCode === 83
				) {
					e.preventDefault()

					fs.writeFileSync('index.html', editor.value, 'utf8')
					alert('index.html saved')
  				}
			})
		</script>
	</body>
</html>
